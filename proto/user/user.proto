syntax = "proto3";
package user;

option go_package = "github.com/Caodongying/dongdong-IM/proto/user";

import "google/api/field_behavior.proto";

// 错误码
enum ErrorCode {
  ERROR_CODE_UNSPECIFIED = 0;
  ERROR_CODE_SUCCESS = 1;
  ERROR_CODE_PARAM_INVALID = 2;
  ERROR_CODE_USER_EXIST = 3;
  ERROR_CODE_USER_NOT_FOUND = 4;
  ERROR_CODE_PASSWORD_ERROR = 5;
  ERROR_CODE_SYSTEM_ERROR = 6;
  ERROR_CODE_TASK_SUBMIT_FAILED = 7;
}

message BaseResponse {
  ErrorCode code = 1;
  string message = 2;
}

// 注册请求
message RegisterRequest {
    string username = 1 [(google.api.field_behavior) = REQUIRED];
    string password = 2 [(google.api.field_behavior) = REQUIRED];
    string email = 3 [(google.api.field_behavior) = REQUIRED];
}

// 注册响应
message RegisterResponse {
  BaseResponse base = 1;
  string user_id = 2;
}

// 登录请求
message LoginRequest {
  string email = 1 [(google.api.field_behavior) = REQUIRED];
  string password = 2 [(google.api.field_behavior) = REQUIRED];
}

// 登录响应
message LoginResponse {
  BaseResponse base = 1;
  string user_id = 2;
  string access_token = 3;
}

// 用户服务定义
service UserService {
    rpc Register(RegisterRequest) returns (RegisterResponse);
    rpc Login(LoginRequest) returns (LoginResponse);
}